resource "null_resource" "configure_rancher_oidc" {
  provisioner "local-exec" {
    command = <<EOT
curl -s -X PUT \
  -H "Authorization: Bearer ${var.rancher_token}" \
  -H "Content-Type: application/json" \
  --data '${data.template_file.keycloak_oidc_payload.rendered}' \
  "${var.rancher_url}/v3/oidcConfigs/keycloak"
EOT
  }
}
